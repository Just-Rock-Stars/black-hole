FROM node:16-alpine

RUN apk add --update python3 make g++ && rm -rf /var/cache/apk/*

WORKDIR /app/

COPY ./ ./
RUN yarn install
RUN yarn link --cwd ./packages/client
RUN yarn link "client" --cwd ./packages/server

EXPOSE 3000
EXPOSE 24678
CMD yarn dev:server
